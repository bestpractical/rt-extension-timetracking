<%init>
# The self service interface doesn't support updating time fields.
return unless $session{CurrentUser}->Privileged
          and $session{CurrentUser}->HasRight( Object => $TicketObj, Right => "ModifyTicket" );

my $date_cf = RT::CustomField->new($session{CurrentUser});
$date_cf->LoadByName( Name => 'Worked Date', LookupType => 'RT::Queue-RT::Ticket-RT::Transaction');

</%init>

<tr>
  <td class="label"><&|/l&>Add to time worked:</&></td>
  <td class="value">
    <form action="<% RT->Config->Get("WebPath") %>/Ticket/Display.html" method="POST">
      <input type="hidden" name="id" value="<% $TicketObj->id %>">
      <& /Elements/EditCustomField, CustomField => $date_cf, Object => RT::Transaction->new( $session{'CurrentUser'} ) &>
      <& /Elements/EditTimeValue,
          Name    => "UpdateTimeWorked",
          Default => $ARGS{UpdateTimeWorked} || '',
          InUnits => $ARGS{'UpdateTimeWorked-TimeUnits'} || 'minutes',
      &>
      <input type="submit" value="<% loc('Add') %>">
    </form>
  </td>
</tr>

<%args>
$TicketObj
</%args>
